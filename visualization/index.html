<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Coding Math Visualizer | Brilliant Style</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container">
        <!-- Tab Selection -->
        <nav class="case-tabs">
            <div class="tab-group" data-group="visual">
                <span class="group-label">Visual</span>
                <div class="tab-row">
                    <div class="tab active" data-case="golden">Golden Spiral</div>
                    <div class="tab" data-case="rainbow">Rainbow Spiral</div>
                    <div class="tab" data-case="sine">Sine Wave</div>
                    <div class="tab" data-case="hexagon">Hex Grid</div>
                    <div class="tab" data-case="damage">Damage Rolls</div>
                    <div class="tab" data-case="pythagorean">Pythagorean</div>
                    <div class="tab" data-case="bhaskara-proof">Bhaskara Proof</div>
                    <div class="tab" data-case="euclid-proof">Euclid Proof</div>
                </div>
            </div>
            <div class="tab-group" data-group="interactive">
                <span class="group-label">Interactive</span>
                <div class="tab-row">
                    <div class="tab" data-case="pathfinding">Pathfinding</div>
                    <div class="tab" data-case="circular">Circular Obstacles</div>
                    <div class="tab" data-case="polygon-map">Polygon Map</div>
                </div>
            </div>
        </nav>

        <header id="header">
            <h1 id="main-title">Fibonacci Golden Spiral</h1>
            <p class="subtitle" id="main-subtitle">A spiral made from Fibonacci numbers.</p>
        </header>

        <main class="dashboard-card">
            <!-- Visualization Canvas -->
            <div class="canvas-container" id="capture-zone">
                <canvas id="mathCanvas"></canvas>
            </div>

            <!-- Controls Holders (Dynamic) -->
            <aside class="controls-shell">
                <section id="display-controls" class="controls active" data-mode="display">
                    <!-- Display mode controls -->
                </section>
                <section id="interactive-controls" class="controls" data-mode="interactive">
                    <!-- Interactive mode controls -->
                </section>
            </aside>
        </main>
    </div>

    <!-- Sleep Mode Overlay -->
    <div id="sleep-overlay">
        <div class="sleep-content">
            <h2>Deep Sleep Mode</h2>
            <p>System paused due to inactivity.<br>Move mouse or click to resume.</p>
            <div class="btn-primary" onclick="Core.resetIdleTimer()">Resume Activity</div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="audio.js"></script>
    <script src="core.js"></script>
    <script src="cases/sine_wave.js"></script>
    <script src="cases/rainbow_spiral.js"></script>
    <script src="cases/golden_spiral.js"></script>
    <script src="cases/hexagon_grid.js"></script>
    <script src="cases/pathfinding.js"></script>
    <script src="cases/damage_rolls.js"></script>
    <script src="cases/pythagorean_theorem.js"></script>
    <script src="https://unpkg.com/delaunator@5.0.0/delaunator.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/simplex-noise/2.4.0/simplex-noise.min.js"></script>
    <script src="cases/circular_pathfinding.js"></script>
    <script src="cases/polygon_map.js"></script>
    <script>
        // Tab Management
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                const caseName = tab.getAttribute('data-case');
                if (caseName === 'sine') {
                    document.getElementById('main-title').textContent = 'The Geometry of Sine';
                    document.getElementById('main-subtitle').textContent = 'A circle turning into a wave.';
                    Core.loadCase(SineWaveCase, { mode: 'display' });
                } else if (caseName === 'rainbow') {
                    document.getElementById('main-title').textContent = 'Rainbow Spiral';
                    document.getElementById('main-subtitle').textContent = 'A colorful spiral from a simple angle rule.';
                    Core.loadCase(RainbowSpiralCase, { mode: 'display' });
                } else if (caseName === 'golden') {
                    document.getElementById('main-title').textContent = 'Fibonacci Golden Spiral';
                    document.getElementById('main-subtitle').textContent = 'A spiral made from Fibonacci numbers.';
                    Core.loadCase(GoldenSpiralCase, { mode: 'display' });
                } else if (caseName === 'hexagon') {
                    document.getElementById('main-title').textContent = 'Hexagonal Grid';
                    document.getElementById('main-subtitle').textContent = 'A pattern made of repeating hexagons.';
                    Core.loadCase(HexagonGridCase, { mode: 'display' });
                } else if (caseName === 'pathfinding') {
                    document.getElementById('main-title').textContent = 'A* Pathfinding';
                    document.getElementById('main-subtitle').textContent = 'Find the shortest path in a hex maze.';
                    Core.loadCase(PathfindingCase, { mode: 'interactive' });
                } else if (caseName === 'damage') {
                    document.getElementById('main-title').textContent = 'Probability: Damage Rolls';
                    document.getElementById('main-subtitle').textContent = 'See how dice rolls spread over many tries.';
                    Core.loadCase(DamageRollsCase, { mode: 'display' });
                } else if (caseName === 'circular') {
                    document.getElementById('main-title').textContent = 'Circular Obstacle Pathfinding';
                    document.getElementById('main-subtitle').textContent = 'Find a path around round obstacles.';
                    Core.loadCase(CircularPathfindingCase, { mode: 'interactive' });
                } else if (caseName === 'polygon-map') {
                    document.getElementById('main-title').textContent = 'Polygonal Map Generation';
                    document.getElementById('main-subtitle').textContent = 'Generate island maps with polygon cells.';
                    Core.loadCase(PolygonMapCase, { mode: 'interactive' });
                } else if (caseName === 'pythagorean') {
                    document.getElementById('main-title').textContent = 'Pythagorean Theorem';
                    document.getElementById('main-subtitle').textContent = 'Visual proof of a² + b² = c².';
                    Core.loadCase(PythagoreanTheoremCase, { mode: 'display' });
                } else if (caseName === 'bhaskara-proof') {
                    window.location.href = 'bhaskara_pythagorean_proof.html';
                } else if (caseName === 'euclid-proof') {
                    window.location.href = 'euclid_pythagorean_proof.html';
                }
            });
        });

        // Load Default Case (Golden Spiral)
        window.onload = () => {
            if (typeof GoldenSpiralCase !== 'undefined') {
                Core.loadCase(GoldenSpiralCase, { mode: 'display' });
            } else {
                console.error("GoldenSpiralCase failed to load!");
            }
        };
    </script>
  </body>
</html>
