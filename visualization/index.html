<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Coding Math Visualizer | Brilliant Style</title>
    <link rel="stylesheet" href="style.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container">
        <!-- Tab Selection -->
        <nav class="case-tabs">
            <div class="tab active" data-case="golden">Golden Spiral</div>
            <div class="tab" data-case="rainbow">Rainbow Spiral</div>
            <div class="tab" data-case="sine">Sine Wave</div>
            <div class="tab" data-case="hexagon">Hex Grid</div>
            <div class="tab" data-case="pathfinding">Pathfinding</div>
            <div class="tab" data-case="damage">Damage Rolls</div>
            <div class="tab" data-case="circular">Circular Obstacles</div>
            <div class="tab" data-case="polygon-map">Polygon Map</div>
        </nav>

        <header id="header">
            <h1 id="main-title">Fibonacci Golden Spiral</h1>
            <p class="subtitle" id="main-subtitle">The infinite beauty of nature's mathematical expansion.</p>
        </header>

        <main class="dashboard-card">
            <!-- Visualization Canvas -->
            <div class="canvas-container" id="capture-zone">
                <canvas id="mathCanvas"></canvas>
            </div>

            <!-- Controls (Dynamic) -->
            <aside class="controls">
                <!-- Dynamic Controls -->
            </aside>
        </main>
    </div>

    <!-- Sleep Mode Overlay -->
    <div id="sleep-overlay">
        <div class="sleep-content">
            <h2>Deep Sleep Mode</h2>
            <p>System paused due to inactivity.<br>Move mouse or click to resume.</p>
            <div class="btn-primary" onclick="Core.resetIdleTimer()">Resume Activity</div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="audio.js"></script>
    <script src="core.js"></script>
    <script src="cases/sine_wave.js"></script>
    <script src="cases/rainbow_spiral.js"></script>
    <script src="cases/golden_spiral.js"></script>
    <script src="cases/hexagon_grid.js"></script>
    <script src="cases/pathfinding.js"></script>
    <script src="cases/damage_rolls.js"></script>
    <script src="https://unpkg.com/delaunator@5.0.0/delaunator.min.js"></script>
    <script src="cases/circular_pathfinding.js"></script>
    <script src="cases/polygon_map.js"></script>
    <script>
        // Tab Management
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                const caseName = tab.getAttribute('data-case');
                if (caseName === 'sine') {
                    document.getElementById('main-title').textContent = 'The Geometry of Sine';
                    document.getElementById('main-subtitle').textContent = 'How circular motion transforms into beautiful waves.';
                    Core.loadCase(SineWaveCase);
                } else if (caseName === 'rainbow') {
                    document.getElementById('main-title').textContent = 'Rainbow Spiral';
                    document.getElementById('main-subtitle').textContent = 'A colorful feast blooming from the Golden Angle.';
                    Core.loadCase(RainbowSpiralCase);
                } else if (caseName === 'golden') {
                    document.getElementById('main-title').textContent = 'Fibonacci Golden Spiral';
                    document.getElementById('main-subtitle').textContent = "The infinite beauty of nature's mathematical expansion.";
                    Core.loadCase(GoldenSpiralCase);
                } else if (caseName === 'hexagon') {
                    document.getElementById('main-title').textContent = 'Hexagonal Grid';
                    document.getElementById('main-subtitle').textContent = 'Exploring the mathematical beauty of hexagonal tiling.';
                    Core.loadCase(HexagonGridCase);
                } else if (caseName === 'pathfinding') {
                    document.getElementById('main-title').textContent = 'A* Pathfinding';
                    document.getElementById('main-subtitle').textContent = 'Finding the shortest path in a hexagonal maze.';
                    Core.loadCase(PathfindingCase);
                } else if (caseName === 'damage') {
                    document.getElementById('main-title').textContent = 'Probability: Damage Rolls';
                    document.getElementById('main-subtitle').textContent = 'Exploring dice probability distributions and variance.';
                    Core.loadCase(DamageRollsCase);
                } else if (caseName === 'circular') {
                    document.getElementById('main-title').textContent = 'Circular Obstacle Pathfinding';
                    document.getElementById('main-subtitle').textContent = 'Finding the shortest path around round obstacles.';
                    Core.loadCase(CircularPathfindingCase);
                } else if (caseName === 'polygon-map') {
                    document.getElementById('main-title').textContent = 'Polygonal Map Generation';
                    document.getElementById('main-subtitle').textContent = 'Procedural island generation using Voronoi diagrams.';
                    Core.loadCase(PolygonMapCase);
                }
            });
        });

        // Load Default Case (Golden Spiral)
        window.onload = () => {
            if (typeof GoldenSpiralCase !== 'undefined') {
                Core.loadCase(GoldenSpiralCase);
            } else {
                console.error("GoldenSpiralCase failed to load!");
            }
        };
    </script>
  </body>
</html>
